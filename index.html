<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI SEO Content Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="AI-powered multilingual SEO blog generator using Gemini and Groq">

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f8fafc;
  margin: 0;
  padding: 20px;
}

.container {
  max-width: 1000px;
  margin: auto;
}

h1 {
  text-align: center;
  color: #0f172a;
}

.card {
  background: white;
  padding: 24px;
  margin-top: 20px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
}

label {
  font-weight: 600;
  margin-top: 16px;
  display: block;
}

input, select, button {
  width: 100%;
  padding: 12px;
  margin-top: 6px;
  font-size: 16px;
}

button {
  background: #2563eb;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

button:hover {
  background: #1d4ed8;
}

button.secondary {
  background: #e5e7eb;
  color: #111827;
}

.keyword {
  display: inline-block;
  padding: 8px 12px;
  margin: 6px;
  border-radius: 6px;
  background: #e0f2fe;
  cursor: pointer;
  font-size: 14px;
}

.keyword.selected {
  background: #2563eb;
  color: white;
}

pre {
  white-space: pre-wrap;
  line-height: 1.6;
}

.hidden {
  display: none;
}

.loader {
  text-align: center;
  font-weight: bold;
  color: #2563eb;
}
</style>
</head>

<body>
<div class="container">

<h1>üöÄ AI SEO Content Studio</h1>

<!-- STEP 1 -->
<div class="card">
  <label>Blog Topic</label>
  <input id="topic" placeholder="e.g. AI in Healthcare">

  <label>Language</label>
  <select id="language">
    <option value="english">English</option>
    <option value="hindi">Hindi</option>
    <option value="bengali">Bengali</option>
    <option value="tamil">Tamil</option>
    <option value="telugu">Telugu</option>
    <option value="marathi">Marathi</option>
  </select>

  <button onclick="generateKeywords()">Generate Keywords</button>
</div>

<!-- STEP 2 -->
<div class="card hidden" id="keywordsCard">
  <h3>Select Keywords</h3>
  <div id="keywords"></div>
  <button onclick="generateOutline()">Generate Outline</button>
</div>

<!-- STEP 3 -->
<div class="card hidden" id="outlineCard">
  <h3>Outline</h3>
  <pre id="outline"></pre>
  <button onclick="generateContent()">Generate Full Content</button>
</div>

<!-- STEP 4 -->
<div class="card hidden" id="contentCard">
  <h3>Generated Blog Content</h3>
  <div id="content"></div>
  <button class="secondary" onclick="copyContent()">Copy Content</button>
</div>

<div class="loader hidden" id="loader">‚è≥ Generating, please wait...</div>

</div>

<script>
const API_BASE = "https://BACKEND_URL_HERE";

let selectedKeywords = [];

function escapeHTML(text) {
  return text.replace(/&/g,"&amp;")
             .replace(/</g,"&lt;")
             .replace(/>/g,"&gt;");
}

function show(id) {
  document.getElementById(id).classList.remove("hidden");
}

function hide(id) {
  document.getElementById(id).classList.add("hidden");
}

async function generateKeywords() {
  const topic = topicInput.value.trim();
  const language = languageSelect.value;

  if (!topic) return alert("Enter a topic");

  hide("keywordsCard");
  hide("outlineCard");
  hide("contentCard");
  show("loader");

  const res = await fetch(`${API_BASE}/api/generate-keywords`, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({ topic, language })
  });

  const data = await res.json();
  const keywords = JSON.parse(data.content[0].text);

  keywordsDiv.innerHTML = "";
  selectedKeywords = [];

  keywords.forEach(k => {
    const el = document.createElement("div");
    el.className = "keyword";
    el.textContent = k.keyword;
    el.onclick = () => {
      el.classList.toggle("selected");
      if (selectedKeywords.includes(k.keyword)) {
        selectedKeywords = selectedKeywords.filter(x => x !== k.keyword);
      } else {
        selectedKeywords.push(k.keyword);
      }
    };
    keywordsDiv.appendChild(el);
  });

  hide("loader");
  show("keywordsCard");
}

async function generateOutline() {
  if (selectedKeywords.length === 0) return alert("Select keywords");

  show("loader");

  const res = await fetch(`${API_BASE}/api/generate-outline`, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      topic: topicInput.value,
      keywords: selectedKeywords,
      language: languageSelect.value
    })
  });

  const data = await res.json();
  outline.textContent = data.content[0].text;

  hide("loader");
  show("outlineCard");
}

async function generateContent() {
  show("loader");

  const res = await fetch(`${API_BASE}/api/generate-content`, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      topic: topicInput.value,
      keywords: selectedKeywords,
      language: languageSelect.value
    })
  });

  const data = await res.json();
  content.innerHTML = escapeHTML(data.content[0].text).replace(/\n/g,"<br>");

  hide("loader");
  show("contentCard");
}

function copyContent() {
  navigator.clipboard.writeText(content.innerText);
  alert("‚úÖ Content copied");
}
</script>

</body>
</html>
